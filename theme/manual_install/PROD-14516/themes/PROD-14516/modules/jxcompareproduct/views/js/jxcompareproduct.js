!function(e){var n={};function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,n,t){o.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,n){if(1&n&&(e=o(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)o.d(t,r,function(n){return e[n]}.bind(null,r));return t},o.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.p="",o(o.s=43)}({43:function(module,exports,__webpack_require__){"use strict";eval("\n\n/**\r\n * 2002-2018 Zemez\r\n *\r\n * JX Compare Product\r\n *\r\n * NOTICE OF LICENSE\r\n *\r\n * This source file is subject to the General Public License (GPL 2.0)\r\n * that is bundled with this package in the file LICENSE.txt.\r\n * It is also available through the world-wide-web at this URL:\r\n * http://opensource.org/licenses/GPL-2.0\r\n *\r\n * DISCLAIMER\r\n *\r\n * Do not edit or add to this file if you wish to upgrade the module to newer\r\n * versions in the future.\r\n *\r\n *  @author    Zemez\r\n *  @copyright 2002-2018 Zemez\r\n *  @license   http://opensource.org/licenses/GPL-2.0 General Public License (GPL 2.0)\r\n */\n\n$(document).ready(function () {\n  prestashop.jxcompare = prestashop.jxcompare || {};\n  var noComparingPreview = true;\n  var $body = $('body');\n  var $container = $body.find('#compare-footer');\n  var $compareCounter = $body.find('.compare-counter');\n  var $containerList = $body.find('#compare-list-footer');\n  var $header_info = $body.find('.compare-header');\n  var refresh_url = $body.find('#compare-footer').attr('data-refresh-url');\n  if (refresh_url === undefined) {\n    refresh_url = $header_info.attr('data-refresh-url');\n  }\n  var $compareMax = $container.attr('data-compare-max');\n  if ($compareMax === undefined) {\n    $compareMax = $header_info.attr('data-compare-max');\n  }\n  prestashop.urls.jxcompare = refresh_url;\n  var setProducts = function setProducts() {\n    if (localStorage.compareProducts) {\n      var available = localStorage.compareProducts.split(',');\n      if (available.length) {\n        prestashop.jxcompare.products = available;\n        $compareCounter.text(available.length);\n      }\n    } else {\n      $compareCounter.text(0);\n      prestashop.jxcompare.products = [];\n    }\n  };\n  setProducts();\n  var checkProductStatus = function checkProductStatus() {\n    $body.find('.js-compare-button').each(function () {\n      var id_product = $(this).attr('data-id-product');\n      if (prestashop.jxcompare.products.indexOf(id_product) !== -1) {\n        $(this).addClass('selected');\n      } else {\n        $(this).removeClass('selected');\n      }\n    });\n  };\n  checkProductStatus();\n  var showModal = prestashop.jxcompare.showModal || function (modal) {\n    $.ajax({\n      type: 'GET',\n      async: true,\n      dataType: \"json\",\n      headers: { \"cache-control\": \"no-cache\" },\n      url: refresh_url,\n      cache: false,\n      data: {\n        rand: new Date().getTime(),\n        action: 'show-modal',\n        products: prestashop.jxcompare.products\n      },\n      beforeSend: function beforeSend() {\n        $('.modal-compare').remove();\n      },\n      success: function success(data) {\n        $body.append(data.response);\n        $('#modal-compare').modal('show');\n        $('#modal-compare').on('hidden.bs.modal', function (e) {\n          $('#modal-compare').remove();\n        });\n      }\n    });\n  };\n  var clearCompare = prestashop.jxcompare.clearCompare || function () {\n    prestashop.jxcompare.products = [];\n    localStorage.setItem('compareProducts', '');\n    $containerList.find('.compare-product-element').each(function () {\n      $(this).remove();\n    });\n    $compareCounter.text(0);\n    $containerList.find('.no-products').remove();\n    $containerList.append('<li class=\"no-products list-inline-item\">' + $container.attr('data-empty-text') + '</li>');\n    $body.find('.js-compare-button').each(function () {\n      $(this).removeClass('selected');\n    });\n  };\n  var showPreview = prestashop.jxcompare.showPreview || function () {\n    $container.addClass('loading');\n    $.ajax({\n      type: 'GET',\n      async: true,\n      dataType: \"json\",\n      headers: { \"cache-control\": \"no-cache\" },\n      url: refresh_url,\n      cache: false,\n      data: {\n        rand: new Date().getTime(),\n        action: 'refresh-preview',\n        products: prestashop.jxcompare.products\n      },\n      success: function success(data) {\n        $containerList.find('.compare-product-element').each(function () {\n          $(this).remove();\n        });\n        $containerList.find('.no-products').remove();\n        $(data.response).appendTo($containerList);\n        $container.removeClass('loading');\n      }\n    });\n  };\n  $(document).on('click', '.js-compare-button', function (event) {\n    event.preventDefault();\n    event.stopPropagation();\n    var action = event.currentTarget.dataset.action;\n    var idProduct = event.currentTarget.dataset.idProduct;\n    var products = prestashop.jxcompare.products;\n    if ($(this).hasClass('selected') || action === 'remove-product') {\n      removeProduct(idProduct);\n    } else {\n      addProduct(idProduct);\n    }\n    checkProductStatus();\n  });\n  $(document).on('click', '.compare-footer-grover', function () {\n    $(this).parent().toggleClass('visible-compare-footer');\n    showPreview();\n  });\n  $(document).on('click', '.compare-products', function (event) {\n    event.preventDefault();\n    showModal();\n  });\n  $(document).on('click', '.compare-clear', function (event) {\n    event.preventDefault();\n    clearCompare();\n  });\n  $(document).on('click', '#compare-features .features-toggle', function () {\n    $('#compare-features').toggleClass('close-titles');\n    $('#compare-products').toggleClass('close-titles');\n  });\n  var addProduct = function addProduct(id) {\n    var products = prestashop.jxcompare.products;\n    if (products.length > $compareMax - 1) {\n      return prestashop.emit('compareMaxError');\n    }\n    if (products.indexOf(id) === -1) {\n      products.push(id);\n    }\n    localStorage.setItem('compareProducts', products);\n    $.ajax({\n      type: 'GET',\n      async: true,\n      dataType: \"json\",\n      headers: { \"cache-control\": \"no-cache\" },\n      url: refresh_url,\n      cache: false,\n      data: {\n        rand: new Date().getTime(),\n        action: 'add-product-to-preview',\n        id_product: id\n      },\n      success: function success(data) {\n        $(data.response).appendTo($containerList);\n        $container.removeClass('.loading').find('.no-products').remove();\n      }\n    });\n    setProducts();\n  };\n  var removeProduct = function removeProduct(id) {\n    var products = prestashop.jxcompare.products;\n    var position = products.indexOf(id);\n    if (position > -1) {\n      products.splice(position, 1);\n    }\n    localStorage.setItem('compareProducts', products);\n    $body.find('.compare-product-element[data-id-product=\"' + id + '\"]').remove();\n    if ($container.find('.compare-product-element').length < 1) {\n      $containerList.append('<li class=\"no-products\">' + $container.attr('data-empty-text') + '</li>');\n      $('#modal-compare').removeClass('with-products').find('.modal-lg').removeClass('modal-lg').addClass('modal-sm').find('.modal-content-compare').append('<div class=\"modal-body\"><p class=\"no-products mb-0\">' + $container.attr('data-empty-text') + '</p></div>');\n    }\n    setProducts();\n  };\n  prestashop.on('compareMaxError', function () {\n    var message = $container.attr('data-max-alert-message');\n    if (message === undefined) {\n      message = $header_info.attr('data-max-alert-message');\n    }\n    $body.append('<div id=\"modal-compare-alert\" class=\"modal fade modal-close-inside\" tabindex=\"-1\" role=\"dialog\"><div class=\"modal-dialog modal-sm\" role=\"document\"><div class=\"modal-content\"><button type=\"button\" class=\"close linearicons-cross\" data-dismiss=\"modal\" aria-label=\"Close\"></button><div class=\"modal-body\">' + message + '</div></div></div></div>');\n    $('#modal-compare-alert').modal('show');\n    $('#modal-compare-alert').on('hidden.bs.modal', function (e) {\n      $('#modal-compare-alert').remove();\n    });\n  });\n});\n\n//# sourceURL=webpack:///./modules/jxcompareproduct/views/js/jxcompareproduct.js?")}});