!function(t){var e={};function n(s){if(e[s])return e[s].exports;var a=e[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,s){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(s,a,function(e){return t[e]}.bind(null,a));return s},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=72)}({72:function(module,exports,__webpack_require__){"use strict";eval("\n\n/*\r\n * 2017 Zemez\r\n *\r\n * JX Search\r\n *\r\n * NOTICE OF LICENSE\r\n *\r\n * This source file is subject to the General Public License (GPL 2.0)\r\n * that is bundled with this package in the file LICENSE.txt.\r\n * It is also available through the world-wide-web at this URL:\r\n * http://opensource.org/licenses/GPL-2.0\r\n *\r\n * DISCLAIMER\r\n *\r\n * Do not edit or add to this file if you wish to upgrade the module to newer\r\n * versions in the future.\r\n *\r\n * @author     Zemez (Alexander Grosul)\r\n * @copyright  2017 Zemez\r\n * @license    http://opensource.org/licenses/GPL-2.0 General Public License (GPL 2.0)\r\n */\n\nif (typeof Object.create !== 'function') {\n\tObject.create = function (obj) {\n\t\tfunction F() {}\n\n\t\tF.prototype = obj;\n\t\treturn new F();\n\t};\n}\n\n(function ($, window, document, undefined) {\n\tvar jxSearchQueries = [];\n\tvar jxPrestashopSearch = {\n\t\tinit: function init(options, elem) {\n\t\t\tvar self = this;\n\t\t\tself.elem = elem;\n\t\t\tself.$elem = $(elem);\n\t\t\tself.$elem.attr('autocomplete', 'off');\n\t\t\tself.options = $.extend({}, $.fn.jxPsSearch.options, options);\n\n\t\t\tif (self.options.jxajaxsearch) {\n\t\t\t\tself.$elem.bind('keyup', function (e) {\n\t\t\t\t\tif (self.options.jxajaxsearch) {\n\t\t\t\t\t\tself.ajaxSearch(self.$elem);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t$('' + self.options.categorySelector + '').bind('change', function (e) {\n\t\t\t\t\tif (self.options.jxajaxsearch) {\n\t\t\t\t\t\tself.ajaxSearch(self.$elem);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tself.jxsearchToggle();\n\n\t\t\t$(document).on('click', '.jxsearch-row', function () {\n\t\t\t\tlocation.href = $(this).find('.jxsearch-inner-row').attr('data-href');\n\t\t\t});\n\n\t\t\tif (self.options.showAllResults) {\n\t\t\t\t$(document).on('click', '' + self.options.resultContainer + ' .jxsearch-alllink', function (e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tself.showAllResult($(this));\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (self.options.navigationMode) {\n\t\t\t\t$(document).on('click', '' + self.options.resultContainer + ' .navigation .prev', function (e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tif (!$(this).hasClass('disabled')) {\n\t\t\t\t\t\tself.showPrevPage($(this));\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$(document).on('click', '' + self.options.resultContainer + ' .navigation .next', function (e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tif (!$(this).hasClass('disabled')) {\n\t\t\t\t\t\tself.showNextPage($(this));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (self.options.pagerMode) {\n\t\t\t\t$(document).on('click', '' + self.options.resultContainer + ' .pager-button', function (e) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tif (!$(this).hasClass('active')) {\n\t\t\t\t\t\tself.goToPage($(this));\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t$(document).on('click', '' + self.options.resultContainer + ', #' + self.$elem.context.id + ', ' + self.options.categorySelector + '', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\n\t\t\t$(document).on('click', function (e) {\n\t\t\t\te.stopPropagation();\n\t\t\t\tself.closeJxSearchResult();\n\t\t\t});\n\t\t},\n\t\tajaxSearch: function ajaxSearch(elem) {\n\t\t\tvar self = this;\n\t\t\tif (elem.val().length >= self.options.minQeuryLength) {\n\t\t\t\tself.stopJxSearchQueries();\n\t\t\t\tself.addSearchLoader();\n\t\t\t\tvar category = $('' + self.options.categorySelector + '').val();\n\t\t\t\tvar jxSearchQuery = $.ajax({\n\t\t\t\t\turl: self.options.jxajaxsearchurl,\n\t\t\t\t\theaders: { \"cache-control\": \"no-cache\" },\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tajaxSearch: 1,\n\t\t\t\t\t\tcategory: category,\n\t\t\t\t\t\tq: elem.val()\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: function success(response) {\n\t\t\t\t\t\tif (response.result) {\n\t\t\t\t\t\t\tself.searchDropdown(self.buildSearchResponse(response.result, response.total), elem);\n\t\t\t\t\t\t\tif (self.options.resultHighlight) {\n\t\t\t\t\t\t\t\tself.highlightQuery();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tself.searchDropdown(self.buildEmptyResponse(response.empty), elem);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tjxSearchQueries.push(jxSearchQuery);\n\t\t\t} else {\n\t\t\t\tself.stopJxSearchQueries();\n\t\t\t\tself.closeJxSearchResult();\n\t\t\t}\n\t\t},\n\t\tstopJxSearchQueries: function stopJxSearchQueries() {\n\t\t\tfor (var i = 0; i < jxSearchQueries.length; i++) {\n\t\t\t\tjxSearchQueries[i].abort();\n\t\t\t}\n\t\t\tjxSearchQueries = [];\n\t\t},\n\t\tcloseJxSearchResult: function closeJxSearchResult() {\n\t\t\tvar searchResult = $('' + this.options.resultContainer + '');\n\t\t\tsearchResult.slideUp();\n\t\t\tsetTimeout(function () {\n\t\t\t\tsearchResult.remove();\n\t\t\t}, 800);\n\t\t},\n\t\taddSearchLoader: function addSearchLoader() {\n\t\t\tvar search_result = $('' + this.options.resultContainer + '');\n\t\t\tif (typeof search_result != 'undefined' && search_result.length) {\n\t\t\t\tsearch_result.addClass('loading');\n\t\t\t}\n\t\t},\n\t\tremoveSearchLoader: function removeSearchLoader() {\n\t\t\tvar search_result = $('' + this.options.resultContainer + '');\n\t\t\tif (typeof search_result != 'undefined' && search_result.length && search_result.hasClass('loading')) {\n\t\t\t\tsearch_result.removeAttr('class');\n\t\t\t}\n\t\t},\n\t\tsearchDropdown: function searchDropdown(data, elem) {\n\t\t\tvar search_result = $('' + this.options.resultContainer + '');\n\t\t\tif (typeof search_result != 'undefined' && search_result.length) {\n\t\t\t\tsearch_result.html(data);\n\t\t\t} else {\n\t\t\t\telem.closest('#jxsearchblock').find('.jxsearch-result').append('<div id=\"' + this.options.resultContainerId + '\" style=\"display: none;\">' + data + '</div>');\n\t\t\t\t$('#' + this.options.resultContainerId).slideDown();\n\t\t\t}\n\t\t\tthis.removeSearchLoader();\n\t\t},\n\t\tbuildEmptyResponse: function buildEmptyResponse(data) {\n\t\t\treturn \"<div class='px-3 py-2'>\" + data + \"</div>\";\n\t\t},\n\t\tbuildSearchResponse: function buildSearchResponse(data, total) {\n\t\t\tvar response_content = '';\n\t\t\tif (data.length > 0) {\n\t\t\t\tif (this.options.pagerMode && this.options.itemsToShow > 0 && !this.options.navigationMode) {\n\t\t\t\t\tresponse_content += this.buildSearchResponsePages(data, total);\n\t\t\t\t\tresponse_content += this.buildSearchResponsePagesPagers(data, total);\n\t\t\t\t} else if (this.options.navigationMode && this.options.navigationPosition) {\n\t\t\t\t\tif (this.options.navigationPosition == 'both' || this.options.navigationPosition == 'top') {\n\t\t\t\t\t\tresponse_content += this.buildSearchResponseNav(data, total, 'top');\n\t\t\t\t\t}\n\n\t\t\t\t\tresponse_content += this.buildSearchResponsePages(data, total);\n\n\t\t\t\t\tif (this.options.navigationPosition == 'both' || this.options.navigationPosition == 'bottom') {\n\t\t\t\t\t\tresponse_content += this.buildSearchResponseNav(data, total, 'bottom');\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tvar hiddenItem = '';\n\n\t\t\t\t\tfor (var i = 0; i < total; i++) {\n\t\t\t\t\t\tif (this.options.showAllResults && i + 1 > this.options.itemsToShow) {\n\t\t\t\t\t\t\tvar hiddenItem = ' hidden-row';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresponse_content += '<div class=\"jxsearch-row ' + hiddenItem + '\">' + data[i] + '</div>';\n\t\t\t\t\t\tif (!this.options.showAllResults && i + 1 == this.options.itemsToShow) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.options.showAllResults && total > this.options.itemsToShow) {\n\t\t\t\t\tresponse_content += this.addShowAll(total, total - this.options.itemsToShow);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn response_content;\n\t\t},\n\t\tbuildSearchResponsePages: function buildSearchResponsePages(data, total) {\n\t\t\tvar response_content = '';\n\t\t\tvar pages = Math.ceil(total / this.options.itemsToShow);\n\t\t\tvar hiddenClass = '';\n\n\t\t\tfor (var p = 1; p < pages + 1; p++) {\n\t\t\t\tvar from = (p - 1) * this.options.itemsToShow;\n\t\t\t\tvar to = parseInt(from) + parseInt(this.options.itemsToShow);\n\t\t\t\tresponse_content += '<div class=\"search-page' + hiddenClass + ' res-' + from + '-' + to + '\" data-page-num=\"' + p + '\">';\n\n\t\t\t\tfor (var i = 0; i < total; i++) {\n\t\t\t\t\tif (i >= from && i < to) {\n\t\t\t\t\t\tresponse_content += '<div class=\"jxsearch-row\">' + data[i] + '</div>';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tresponse_content += '</div>';\n\t\t\t\thiddenClass = ' hidden-page';\n\t\t\t}\n\n\t\t\treturn response_content;\n\t\t},\n\t\tbuildSearchResponsePagesPagers: function buildSearchResponsePagesPagers(data, total) {\n\t\t\tvar pages = Math.ceil(total / this.options.itemsToShow);\n\t\t\tvar pagers = '';\n\t\t\tvar active = ' active';\n\t\t\tif (pages > 1) {\n\t\t\t\tpagers += '<div class=\"pagers\">';\n\t\t\t\tfor (var i = 1; i < pages + 1; i++) {\n\t\t\t\t\tpagers += '<a href=\"#\" class=\"pager-button ' + active + '\" data-page-num =\"' + i + '\">' + i + '</a>';\n\t\t\t\t\tactive = '';\n\t\t\t\t}\n\t\t\t\tpagers += '</div>';\n\t\t\t}\n\t\t\treturn pagers;\n\t\t},\n\t\tbuildSearchResponsePagesCounter: function buildSearchResponsePagesCounter(total) {\n\t\t\tvar count = '';\n\t\t\tcount += '<div class=\"count-pages\"><span class=\"current\">1</span>/<span class=\"total\">' + total + '</span></div>';\n\t\t\treturn count;\n\t\t},\n\t\tsetSearchResponsePagesCurrent: function setSearchResponsePagesCurrent(page) {\n\t\t\t$('' + this.options.resultContainer + ' .count-pages .current').html(page);\n\t\t},\n\t\tbuildSearchResponseNav: function buildSearchResponseNav(data, total, position) {\n\t\t\tvar pages = Math.ceil(total / this.options.itemsToShow);\n\t\t\tvar nav = '';\n\t\t\tif (pages > 1) {\n\t\t\t\tnav += '<div class=\"navigation ' + position + '\">';\n\t\t\t\tnav += '<a href=\"#\" class=\"icon-caret-left prev disabled\"></a>';\n\t\t\t\tif (this.options.pagerMode && this.options.itemsToShow > 0) {\n\t\t\t\t\tnav += this.buildSearchResponsePagesPagers(data, total);\n\t\t\t\t} else {\n\t\t\t\t\tnav += this.buildSearchResponsePagesCounter(pages);\n\t\t\t\t}\n\t\t\t\tnav += '<a href=\"#\" class=\"icon-caret-right next\"></a>';\n\t\t\t\tnav += '</div>';\n\t\t\t}\n\t\t\treturn nav;\n\t\t},\n\t\tshowPrevPage: function showPrevPage(elem) {\n\t\t\tvar prevPage = parseInt($('' + this.options.resultContainer + '').find('.search-page:visible').attr('data-page-num')) - 1;\n\n\t\t\tthis.showPage(prevPage);\n\n\t\t\tthis.setSearchResponsePagesCurrent(prevPage);\n\t\t\tif (this.options.pagerMode) {\n\t\t\t\tthis.addActivePager(prevPage);\n\t\t\t}\n\n\t\t\tthis.setSearchResponsePagesCurrent(prevPage);\n\t\t\tthis.disableNavButton('next', 'prev', prevPage);\n\t\t},\n\t\tshowNextPage: function showNextPage(elem) {\n\t\t\tvar nextPage = parseInt($('' + this.options.resultContainer + '').find('.search-page:visible').attr('data-page-num')) + 1;\n\n\t\t\tthis.showPage(nextPage);\n\t\t\tthis.setSearchResponsePagesCurrent(nextPage);\n\t\t\tif (this.options.pagerMode) {\n\t\t\t\tthis.addActivePager(nextPage);\n\t\t\t}\n\t\t\tthis.disableNavButton('prev', 'next', nextPage);\n\t\t},\n\t\tshowPage: function showPage(page) {\n\t\t\t$('' + this.options.resultContainer + '').find('.search-page').each(function () {\n\t\t\t\tif ($(this).attr('data-page-num') != page) {\n\t\t\t\t\t$(this).addClass('hidden-page');\n\t\t\t\t} else {\n\t\t\t\t\t$(this).removeClass('hidden-page');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tdisableNavButton: function disableNavButton(name, name1, page) {\n\t\t\tvar $elem = $('' + this.options.resultContainer + '');\n\t\t\tvar pages = 1;\n\t\t\tif (name1 == 'next') {\n\t\t\t\tvar pages = $elem.find('.search-page').length;\n\t\t\t}\n\n\t\t\t$('' + this.options.resultContainer + ' a.' + name + '').removeClass('disabled');\n\n\t\t\tif (page == pages) {\n\t\t\t\t$('' + this.options.resultContainer + ' a.' + name1 + '').addClass('disabled');\n\t\t\t} else {\n\t\t\t\t$('' + this.options.resultContainer + ' a.' + name1 + '').removeClass('disabled');\n\t\t\t}\n\t\t},\n\t\tgoToPage: function goToPage(elem) {\n\t\t\tvar $elem = $('' + this.options.resultContainer + '');\n\t\t\tvar pageToGo = elem.attr('data-page-num');\n\n\t\t\tthis.addActivePager(pageToGo);\n\t\t\tif (pageToGo == 1) {\n\t\t\t\tthis.disableNavButton('next', 'prev', pageToGo);\n\t\t\t} else {\n\t\t\t\tthis.disableNavButton('prev', 'next', pageToGo);\n\t\t\t}\n\n\t\t\tthis.showPage(pageToGo);\n\t\t},\n\t\taddActivePager: function addActivePager(page) {\n\t\t\t$('' + this.options.resultContainer + '').find('.pagers a').each(function () {\n\t\t\t\tif ($(this).attr('data-page-num') != page) {\n\t\t\t\t\t$(this).removeClass('active');\n\t\t\t\t} else {\n\t\t\t\t\t$(this).addClass('active');\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\thighlightQuery: function highlightQuery(data) {\n\t\t\tvar elem = this.$elem;\n\t\t\tvar searchQuery = new RegExp('(' + elem.val() + ')', 'gi');\n\t\t\t$('' + this.options.resultContainer + '').find('.jxsearch-row div div div, .jxsearch-row span').each(function () {\n\t\t\t\t$(this).html($(this).text().replace(searchQuery, '<strong class=\"highlight\">$&</strong>'));\n\t\t\t});\n\t\t},\n\t\taddShowAll: function addShowAll(total, hidden) {\n\t\t\treturn '<div class=\"jxsearch-alllink\"><a href=\"#\">' + jxsearch_showall_text.replace(/%s/g, hidden) + '</a></div>';\n\t\t},\n\t\tshowAllResult: function showAllResult(link) {\n\t\t\t$('' + this.options.resultContainer + '').find('.jxsearch-row').each(function () {\n\t\t\t\t$(this).removeClass('hidden-row');\n\t\t\t});\n\t\t\t$('' + this.options.resultContainer + '').find('.search-page').each(function () {\n\t\t\t\t$(this).removeClass('hidden-page');\n\t\t\t});\n\t\t\t$('' + this.options.resultContainer + '').find('.navigation, .pagers').remove();\n\t\t\tlink.remove();\n\t\t},\n\t\tjxsearchToggle: function jxsearchToggle() {\n\t\t\tvar self = this,\n\t\t\t    searchInput = $(\"#jx_search_query\"),\n\t\t\t    searchWrapper = $('#jxsearchblock').parent();\n\t\t\t$('#jxsearch-close').on(\"click\", function () {\n\t\t\t\tsearchWrapper.removeClass(\"active\");\n\t\t\t\tsearchInput.val('');\n\t\t\t\tself.stopJxSearchQueries();\n\t\t\t\tself.closeJxSearchResult();\n\t\t\t});\n\t\t\t$(document).mouseup(function (e) {\n\t\t\t\tif (searchWrapper.has(e.target).length === 0 && !searchInput.val()) {\n\t\t\t\t\tsearchWrapper.removeClass(\"active\");\n\t\t\t\t\tself.stopJxSearchQueries();\n\t\t\t\t\tself.closeJxSearchResult();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\n\t$.fn.jxPsSearch = function (options) {\n\t\treturn this.each(function () {\n\t\t\tvar search = Object.create(jxPrestashopSearch);\n\t\t\tsearch.init(options, this);\n\t\t\t$.data(this, 'jxPsSearch', search);\n\t\t});\n\t};\n\n\t$.fn.jxPsSearch.options = {\n\t\tjxajaxsearchurl: search_url_local,\n\t\tjxajaxsearch: use_jx_ajax_search ? use_jx_ajax_search : false,\n\t\tcategorySelector: 'select[name=\"search_categories\"]',\n\t\tresultContainer: '#jxsearch_result',\n\t\tresultContainerId: 'jxsearch_result',\n\t\tminQeuryLength: jxsearch_minlength ? jxsearch_minlength : 3,\n\t\tshowAllResults: jxsearch_showallresults ? jxsearch_showallresults : false,\n\t\tpagerMode: jxsearch_pager ? jxsearch_pager : false,\n\t\titemsToShow: jxsearch_itemstoshow ? jxsearch_itemstoshow : 3,\n\t\tnavigationMode: jxsearch_navigation ? jxsearch_navigation : false,\n\t\tnavigationPosition: jxsearch_navigation_position ? jxsearch_navigation_position : 'both',\n\t\tresultHighlight: jxsearch_highlight ? jxsearch_highlight : false\n\t};\n})(jQuery, window, document);\n\n$(document).ready(function () {\n\t$('#jx_search_query').jxPsSearch();\n\tif (use_blog_search) {\n\t\t$('#jx_blog_search_query').jxPsSearch({\n\t\t\tjxajaxsearchurl: blog_search_url,\n\t\t\tcategorySelector: 'select[name=\"search_blog_categories\"]',\n\t\t\tresultContainer: '#jxsearch_blog_result',\n\t\t\tresultContainerId: 'jxsearch_blog_result'\n\t\t});\n\t}\n\t$('#jxsearch-toggle').on(\"click\", function () {\n\t\t$('#jxsearchblock').parent().toggleClass(\"active\");\n\t\tsetTimeout(function () {\n\t\t\t$(\"#jx_search_query\").trigger(\"focus\");\n\t\t}, 500);\n\t});\n});\n\n//# sourceURL=webpack:///./modules/jxsearch/views/js/jxsearch.js?")}});