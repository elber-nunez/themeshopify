!function(n){var e={};function r(o){if(e[o])return e[o].exports;var a=e[o]={i:o,l:!1,exports:{}};return n[o].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=n,r.c=e,r.d=function(n,e,o){r.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:o})},r.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},r.t=function(n,e){if(1&e&&(n=r(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var a in n)r.d(o,a,function(e){return n[e]}.bind(null,a));return o},r.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return r.d(e,"a",e),e},r.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},r.p="",r(r.s=51)}({51:function(module,exports,__webpack_require__){"use strict";eval("\n\n/*\r\n * 2002-2018 Zemez\r\n *\r\n * JX Header Account\r\n *\r\n * NOTICE OF LICENSE\r\n *\r\n * This source file is subject to the General Public License (GPL 2.0)\r\n * that is bundled with this package in the file LICENSE.txt.\r\n * It is also available through the world-wide-web at this URL:\r\n * http://opensource.org/licenses/GPL-2.0\r\n\r\n * @author     Zemez\r\n * @copyright  2002-2018 Zemez\r\n * @license    http://opensource.org/licenses/GPL-2.0 General Public License (GPL 2.0)\r\n */\n\nfunction in_array(value, array) {\n  for (var i in array) {\n    if (array[i] + '' === value + '') return true;\n  }return false;\n}\n\nvar jxha = {\n  getQueryParameters: function getQueryParameters(query) {\n    var post = new Array();\n    for (var i = 0; i < query.length; i++) {\n      post[query[i]['name']] = query[i]['value'];\n    }\n    return post;\n  },\n  ajax: function ajax() {\n    this.init = function (options) {\n      this.options = $.extend(this.options, options);\n      this.request();\n\n      return this;\n    };\n\n    this.error = function (XMLHttpRequest, textStatus, errorThrown) {\n      var error = \"TECHNICAL ERROR: unable to load form.\\n\\nDetails:\\nError thrown: \" + XMLHttpRequest + \"\\n\" + 'Text status: ' + textStatus;\n      $('body').append('<div id=\"jxha-modal-error\" class=\"modal fade\" tabindex=\"-1\" role=\"dialog\"><div class=\"modal-dialog\" role=\"document\"><div class=\"modal-content\"><div class=\"modal-header\"><button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"><span class=\"linearicons-cross\" aria-hidden=\"true\"></span></button></div><div class=\"modal-body\">' + error + '</div></div></div></div>');\n      $('#jxha-modal-error').modal();\n    };\n\n    this.options = {\n      type: 'POST',\n      url: prestashop.urls.base_url,\n      cache: false,\n      dataType: \"json\",\n      success: function success() {},\n      error: this.error\n    };\n\n    this.request = function () {\n      $.ajax(this.options);\n    };\n  },\n  init: function init(type) {\n    if (type == 'popup' || type == 'leftside' || type == 'rightside') {\n      $('body').append($('#jxha-modal'));\n      $(document).on('click', '#jx-header-account-link', function () {\n        $('#jxha-modal').modal();\n      });\n    }\n    return this;\n  }\n};\n\n$(document).ready(function () {\n  var jxheaderaccount = new jxha.init(JXHEADERACCOUNT_DISPLAY_TYPE);\n\n  $(document).on('submit', '[id*=\"login-content-\"] form', function (e) {\n    e.preventDefault();\n    submitLoginFunction($(this).closest('.login-content'));\n  });\n  $(document).on('submit', '[id*=\"create-account-content-\"] form', function (e) {\n    e.preventDefault();\n    submitCreate($(this).closest('.create-account-content'));\n  });\n  $(document).on('submit', '[id*=\"forgot-password-content-\"] form', function (e) {\n    e.preventDefault();\n    submitRetrieve($(this).closest('.forgot-password-content'));\n  });\n\n  $('.header-login-content a[data-toggle=\"tab\"]').on('shown.bs.tab', function (e) {\n    $(e.target).removeClass('active');\n  });\n});\n\nfunction submitLoginFunction(elem) {\n  var options = {\n    data: {\n      fc: 'module',\n      module: 'jxheaderaccount',\n      controller: 'auth',\n      submitLogin: 1,\n      ajax: true,\n      email: elem.find('[name=email]').val(),\n      password: elem.find('[name=password]').val(),\n      token: prestashop.token\n    },\n    success: function success(jsonData) {\n      if (jsonData.hasError) {\n        var errors = '';\n        var error;\n        for (error in jsonData.errors) {\n          if (error != 'indexOf' && error != '' && error != 'back') {\n            if (jsonData.errors[error] == '') {\n              elem.find('[name=' + error + ']').parents('.form-group').removeClass('has-error');\n              elem.find('[name=' + error + ']').parents('.form-group').find('.help-block').remove();\n            } else {\n              elem.find('[name=' + error + ']').parents('.form-group').addClass('has-error');\n              elem.find('[name=' + error + ']').parents('.form-group').find('.help-block').remove();\n              elem.find('[name=' + error + ']').parent().append('<div class=\"help-block\"><ul><li class=\"alert alert-danger\">' + jsonData.errors[error] + '</li></ul></div>');\n            }\n          } else if (error == '') {\n            if (jsonData.errors[error] == '') {\n              elem.find('.main-help-block ul').html('');\n            } else {\n              elem.find('.main-help-block ul').html('<li class=\"alert alert-danger\">' + jsonData.errors[error] + '</li>');\n            }\n          }\n        }\n      } else {\n        document.location.reload();\n      }\n    }\n  };\n  var ajax = new jxha.ajax();\n  ajax.init(options);\n}\n\nfunction submitCreate(elem) {\n  var options = {\n    data: $.extend({}, jxha.getQueryParameters(elem.find('form').serializeArray()), {\n      submitCreate: 1,\n      fc: 'module',\n      module: 'jxheaderaccount',\n      controller: 'auth',\n      ajax: true\n    }),\n    success: function success(jsonData) {\n      if (jsonData.hasError) {\n        var errors = '';\n        var error;\n        for (error in jsonData.errors) {\n          if (error != 'indexOf' && error != '' && error != 'back') {\n            if (jsonData.errors[error] == '') {\n              elem.find('[name=' + error + ']').parents('.form-group').removeClass('has-error');\n              elem.find('[name=' + error + ']').parents('.form-group').find('.help-block').remove();\n            } else {\n              elem.find('[name=' + error + ']').parents('.form-group').addClass('has-error');\n              elem.find('[name=' + error + ']').parents('.form-group').find('.help-block').remove();\n              elem.find('[name=' + error + ']').parent().append('<div class=\"help-block\"><ul><li class=\"alert alert-danger\">' + jsonData.errors[error] + '</li></ul></div>');\n            }\n          } else if (error == '') {\n            if (jsonData.errors[error] == '') {\n              elem.find('.main-help-block ul').html('');\n            } else {\n              elem.find('.main-help-block ul').html('<li class=\"alert alert-danger\">' + jsonData.errors[error] + '</li>');\n            }\n          }\n        }\n      } else {\n        document.location.reload();\n      }\n    },\n    error: function error(jsonData) {\n      elem.find('[name=email]').parents('.form-group').addClass('has-error');\n      elem.find('[name=email]').parents('.form-group').find('.help-block').remove();\n      elem.find('[name=email]').parent().append('<div class=\"help-block\"><ul><li class=\"alert alert-danger\">' + jsonData.responseText + '</li></ul></div>');\n    }\n  };\n  var ajax = new jxha.ajax();\n  ajax.init(options);\n}\n\nfunction submitRetrieve(elem) {\n  var options = {\n    data: {\n      retrievePassword: 1,\n      fc: 'module',\n      module: 'jxheaderaccount',\n      controller: 'password',\n      ajax: true,\n      email: elem.find('[name=email]').val()\n    },\n    success: function success(jsonData) {\n      if (jsonData.hasError) {\n        var errors = '';\n        var error;\n        for (error in jsonData.errors) {\n          if (error != 'indexOf') errors += '<li class=\"alert alert-danger\">' + jsonData.errors[error] + '</li>';\n        }elem.find('.main-help-block ul').html(errors);\n      } else {\n        elem.find('.main-help-block ul').html('<li class=\"alert alert-success\">' + jsonData.confirm + '</li>');\n      }\n    }\n  };\n  var ajax = new jxha.ajax();\n  ajax.init(options);\n}\n\n//# sourceURL=webpack:///./modules/jxheaderaccount/views/js/jxheaderaccount.js?")}});